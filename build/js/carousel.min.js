!function(){"use strict";const e=300;document.addEventListener("DOMContentLoaded",(function(){const t=document.getElementById("videos");if(!t)return;const s=t.querySelector(".shorts-grid");if(!s)return;const o={isCarouselActive:!1,isDragging:!1,touchData:{startX:0,endX:0},dragData:{startX:0,scrollLeft:0},scrollTimer:null},n={setup(){const e=window.innerWidth<992;e!==o.isCarouselActive&&(e?(s.classList.add("carousel-active"),function(){if(t.querySelector(".carousel-indicators"))return;const e=s.querySelectorAll(".shorts-item");if(0===e.length)return;const o=document.createElement("div");o.className="carousel-indicators",e.forEach(((t,s)=>{const a=document.createElement("span");a.className="indicator-dot",0===s&&a.classList.add("active"),a.addEventListener("click",(()=>{n.updateActiveItem(e[s]),n.updateIndicators(s)})),o.appendChild(a)})),s.parentNode.insertBefore(o,s.nextSibling)}(),s.addEventListener("mousedown",i,{passive:!1}),s.addEventListener("touchstart",d,{passive:!0}),s.addEventListener("touchend",f,{passive:!0}),s.addEventListener("touchmove",u,{passive:!0}),s.addEventListener("scroll",a),window.addEventListener("mouseup",l),window.addEventListener("mousemove",c,{passive:!1}),function(){const e=s.querySelectorAll(".shorts-item");e.length>0&&(e[0].classList.add("active"),n.updateIndicators(0))}()):(s.classList.remove("carousel-active"),s.querySelectorAll(".shorts-item").forEach((e=>{e.classList.remove("active"),e.removeAttribute("style")})),function(){const e=t.querySelector(".carousel-indicators");e&&e.remove()}(),s.removeEventListener("mousedown",i),s.removeEventListener("touchstart",d),s.removeEventListener("touchend",f),s.removeEventListener("touchmove",u),s.removeEventListener("scroll",a),window.removeEventListener("mouseup",l),window.removeEventListener("mousemove",c)),o.isCarouselActive=e)},updateIndicators(e){t.querySelectorAll(".indicator-dot").forEach(((t,s)=>{t.classList.toggle("active",s===e)}))},updateActiveItem(t){if(!t)return;s.querySelectorAll(".shorts-item").forEach((e=>e.classList.remove("active"))),t.classList.add("active");const o=t.offsetLeft-(s.offsetWidth-t.offsetWidth)/2;"scrollBehavior"in document.documentElement.style?s.scrollTo({left:o,behavior:"smooth"}):function(t){const o=s.scrollLeft,n=t-o;let a=null;function r(t){a||(a=t);const i=t-a,c=Math.min(i/e,1),l=.5-.5*Math.cos(c*Math.PI);s.scrollLeft=o+n*l,i<e&&window.requestAnimationFrame(r)}window.requestAnimationFrame(r)}(o)}};function a(){o.scrollTimer&&clearTimeout(o.scrollTimer),o.scrollTimer=setTimeout((()=>{o.isDragging||r()}),100)}function r(){const e=s.querySelectorAll(".shorts-item"),t=s.scrollLeft+s.offsetWidth/2;let o=null,a=1/0;if(e.forEach((e=>{const s=e.offsetLeft+e.offsetWidth/2,n=Math.abs(s-t);n<a&&(a=n,o=e)})),o){const t=Array.from(e).indexOf(o);n.updateIndicators(t),o.classList.contains("active")||(e.forEach((e=>e.classList.remove("active"))),o.classList.add("active"))}}function i(e){s.contains(e.target)&&(e.preventDefault(),e.stopPropagation(),o.isDragging=!0,o.dragData.startX=e.pageX-s.offsetLeft,o.dragData.scrollLeft=s.scrollLeft,s.classList.add("grabbing"))}function c(e){if(!o.isDragging)return;e.preventDefault(),e.stopPropagation();const t=e.pageX-s.offsetLeft-o.dragData.startX;s.scrollLeft=o.dragData.scrollLeft-t}function l(){o.isDragging&&(o.isDragging=!1,s.classList.remove("grabbing"),r())}function d(e){s.contains(e.target)&&(e.stopPropagation(),o.touchData.startX=e.changedTouches[0].screenX,o.dragData.startX=e.touches[0].pageX-s.offsetLeft,o.dragData.scrollLeft=s.scrollLeft,s.classList.add("grabbing"))}function u(e){if(s.contains(e.target)){e.stopPropagation();const t=e.touches[0].pageX-s.offsetLeft-o.dragData.startX;s.scrollLeft=o.dragData.scrollLeft-t}}function f(e){s.contains(e.target)&&(e.stopPropagation(),o.touchData.endX=e.changedTouches[0].screenX,s.classList.remove("grabbing"),r())}window.addEventListener("resize",(()=>{requestAnimationFrame(n.setup)})),n.setup(),function(){const e=new MutationObserver((e=>{for(const t of e)if("childList"===t.type&&t.addedNodes.length>0){setTimeout(n.setup,100);break}}));e.observe(s,{childList:!0}),window.addEventListener("beforeunload",(()=>e.disconnect()))}()}))}();